(this["webpackJsonptodo-app"]=this["webpackJsonptodo-app"]||[]).push([[0],{32:function(e,t,a){e.exports=a(55)},38:function(e,t,a){},39:function(e,t,a){},55:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(28),c=a.n(s),l=(a(37),a(38),a(39),a(5)),o=a(6),i=a(8),m=a(7),d=a(13),u=a.n(d),p=u.a.initializeApp({apiKey:"AIzaSyBmwn7tIFGgJ4DqC3jAzMSnufinKcI6KdM",authDomain:"todoapp-ba26c.firebaseapp.com",databaseURL:"https://todoapp-ba26c.firebaseio.com",projectId:"todoapp-ba26c",storageBucket:"todoapp-ba26c.appspot.com",messagingSenderId:"814719720248",appId:"1:814719720248:web:4400d17e61b02e4d6a7fcd",measurementId:"G-37JR1E2C55"}),h=a(19),E=a(15),b=function(e){var t=Object(E.g)();return r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-dark font-size-18",htmlFor:"login-email-input"},"Email:"),r.a.createElement("input",{type:"email",className:"form-control",id:"login-email-input",placeholder:"Enter email",name:"email",value:e.state.email,onChange:e.handleChange})),r.a.createElement("div",{className:"form-group mb-4"},r.a.createElement("label",{className:"text-dark font-size-18",htmlFor:"login-password-input"},"Password:"),r.a.createElement("input",{type:"password",className:"form-control",id:"login-password-input",placeholder:"Password",name:"password",value:e.state.password,onChange:e.handleChange})),r.a.createElement("div",{className:"row align-items-center"},r.a.createElement("input",{type:"submit",className:"btn btn-dark mb-2 ml-3",value:"login",onClick:e.login}),r.a.createElement("button",{className:"btn btn-secondary mb-2 ml-3",onClick:function(){return t.push("/register")}},"Register")))},g=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState(Object(h.a)({},e.target.name,e.target.value))},n.login=function(e){e.preventDefault(),p.auth().signInWithEmailAndPassword(n.state.email,n.state.password).catch((function(e){return n.setState({fireErrors:e.message})}))},n.state={email:"",password:"",fireErrors:""},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state.fireErrors?r.a.createElement("div",{className:"alert alert-danger"},this.state.fireErrors):null;return r.a.createElement("section",{className:"login-page section"},r.a.createElement("div",{className:"row align-items-center justify-content-center h-100"},r.a.createElement("div",{className:"col-6 border border-secondary rounded bg-light p-3"},r.a.createElement("h1",{className:"text-dark text-center"},"Login"),e,r.a.createElement(b,{handleChange:this.handleChange,login:this.login,state:this.state}))))}}]),a}(n.Component),f=a(31),v=a(12),N=function(e){var t={pathname:"/edit-or-create",state:{prevPath:Object(E.g)().location.pathname,mode:"create",item:null}};return r.a.createElement("div",{className:"row align-items-center text-center text-white justify-content-between mb-5 gradient"},r.a.createElement("div",{className:"col"},r.a.createElement("h1",null,"RViolance")),r.a.createElement("div",{className:"col"},r.a.createElement(v.b,{to:t},r.a.createElement("button",{className:"btn text-white btn-dark createBtn"},"Add new"))),r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"row justify-content-center align-items-center"},r.a.createElement("div",{className:"user-name  font-size-18"},e.userName),r.a.createElement("button",{className:"btn btn-dark btn-sm ml-2",onClick:function(){u.a.auth().signOut()}},"Log out"))))},w=function(e){var t,a=e.options,n=a.done?"bg-success":"bg-secondary",s="",c="",l=a.deadline.split("").filter((function(e){return"T"!==e})).join(""),o=Array.from(l.matchAll(/([0-9]{4}-[0-9]{2}-[0-9]{2})([0-9]{2}:[0-9]{2})/g)),i={pathname:"/edit-or-create",state:{prevPath:e.prevPath,mode:"edit",id:e.id,item:e.options}},m=function(t){t.preventDefault(),p.database().ref("/users/"+e.userId+"/todos/"+e.id).remove()};return r.a.createElement("li",{className:"mb-2 fz-14"},r.a.createElement("div",{style:{minHeight:"20px"},className:"row justify-content-start align-items-center rounded p-1 text-white ".concat(n)},r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"custom-control custom-checkbox d-inline-block"},r.a.createElement("input",{type:"checkbox",className:"custom-control-input",id:e.id,name:"title",onChange:function(t){p.database().ref("/users/"+e.userId+"/todos/"+e.id).update({done:t.target.checked})},checked:a.done}),r.a.createElement("label",{className:"custom-control-label",htmlFor:e.id},a.title))),r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:""},a.description.length>18&&"more"!==t?r.a.createElement("span",null,a.description.substring(0,18),r.a.createElement("a",{href:"#",style:{color:"#fff",textDecoration:"none"},onClick:function(e){"..."===e.target.text?e.target.text=a.description.substring(18):e.target.text="..."}},"...")):r.a.createElement("span",null,a.description))),r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:""},o[0]?o[0][2]+" "+o[0][1]:null))),(a.done?(s="bg-dark",c="bg-danger"):(s="bg-success",c="bg-dark"),"/home"===e.prevPath?null:"/edit"===e.prevPath?r.a.createElement("div",{className:"row justify-content-end"},r.a.createElement("div",{className:"col"},r.a.createElement(v.b,{to:i},r.a.createElement("button",{className:"btn ".concat(s," text-white fz-14 mr-1"),style:{padding:"1px 5px"}},"Edit")),r.a.createElement("button",{style:{padding:"1px 5px"},className:"btn ".concat(c," fz-14 text-white"),onClick:m},"Delete"))):void 0)))},y=function(e){var t="/home"===e.outPage?"Edit items":"Cancel",a="/home"===e.outPage?"/edit":"/home",n="/home"===a?"btn-danger":"btn-dark",s=[];if(e.todos){for(var c=[],l=0,o=Object.keys(e.todos);l<o.length;l++){var i=o[l];c.push(e.todos[i].deadline)}c.sort(),c.forEach((function(t){for(var a=0,n=Object.keys(e.todos);a<n.length;a++){var c=n[a];e.todos[c].deadline===t&&s.push(r.a.createElement(w,{key:c,options:e.todos[c],id:c,userId:e.userId,prevPath:e.outPage}))}}))}var m=0===s.length?r.a.createElement("div",{style:{color:"black",textAlign:"center"}},"No todos..."):s;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("ul",{style:{listStyle:"none"}},r.a.createElement("li",{className:"mb-2"},r.a.createElement("div",{className:"row justify-content-between align-items-center text-white"},r.a.createElement(v.b,{to:a,style:{textDecoration:"none"}},r.a.createElement("button",{className:"btn "+n+" btn-block"},t)))),m))))},k=function(e){var t=Object(n.useState)({}),a=Object(f.a)(t,2),s=a[0],c=a[1],l=Object(E.g)();return Object(n.useEffect)((function(){e.userId?u.a.database().ref("/users/"+e.userId).on("value",(function(e){c({todos:e.val().todos,name:e.val().name+" "+e.val().lastName})})):l.push("/login")}),[]),r.a.createElement("section",{className:"todo-page section"},r.a.createElement(N,{userName:s.name}),r.a.createElement(y,{outPage:e.outPage,todos:s.todos,userId:e.userId}))},j=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){return Object(l.a)(this,a),t.call(this,e)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement(k,{outPage:"/home",userId:this.props.userId})}}]),a}(n.Component),C=function(e){var t=Object(E.g)();return r.a.createElement("form",null,r.a.createElement("div",{className:"col-11"},r.a.createElement("div",{className:"row justify-content-between"},r.a.createElement("div",{className:"col ml-3"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-dark font-size-18",htmlFor:"register-name-input"},"First name:"),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Name",id:"register-name-input",onChange:e.handleChange,name:"name",value:e.state.name}))),r.a.createElement("div",{className:"col ml-4"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-dark font-size-18",htmlFor:"register-last-name-input"},"Last name:"),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Last name",id:"register-last-name-input",onChange:e.handleChange,name:"lastName",value:e.state.lastName})))),r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col ml-3"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-dark font-size-18",htmlFor:"register-email-input"},"Email:"),r.a.createElement("input",{type:"email",className:"form-control",id:"register-email-input",placeholder:"Enter email",onChange:e.handleChange,name:"email",value:e.state.email})))),r.a.createElement("div",{className:"row justify-content-between"},r.a.createElement("div",{className:"col mb-4 ml-3"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-dark font-size-18",htmlFor:"register-password-input"},"Password:"),r.a.createElement("input",{type:"password",className:"form-control",id:"register-password-input",placeholder:"Password",onChange:e.handleChange,name:"password",value:e.state.password}))),r.a.createElement("div",{className:"col mb-4 ml-4"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-dark font-size-18",htmlFor:"register-confirm-input"},"Confirm password:"),r.a.createElement("input",{type:"password",className:"form-control",id:"register-confirm-input",placeholder:"Password",onChange:e.handleChange,name:"confirm",value:e.state.confirm})))),r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-5"},r.a.createElement("input",{type:"submit",className:"btn btn-dark mb-2 ml-3 btn-block",value:"Register",onClick:e.register})),r.a.createElement("div",{className:"col-5"},r.a.createElement("button",{className:"btn btn-secondary mb-2 ml-3 btn-block",onClick:function(){return t.push("/login")}},"Log in instead")))))},x=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).handleChange=function(t){e.setState(Object(h.a)({},t.target.name,t.target.value))},e.register=function(t){t.preventDefault(),"admin-root"===e.state.name?e.state.password!==e.state.confirm?e.setState({fireErrors:"Different passwords!"}):(e.userData={name:e.state.name,lastName:e.state.lastName,email:e.state.email,password:e.state.password},p.auth().createUserWithEmailAndPassword(e.state.email,e.state.password).then((function(){var t=p.auth().currentUser.uid;p.database().ref("users/"+t).set(e.userData)})).catch((function(t){return e.setState({fireErrors:t.message})}))):e.setState({fireErrors:"You havn't access. Sorry! =)"})},e.state={name:"",lastName:"",email:"",password:"",confirm:"",fireErrors:""},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state.fireErrors?r.a.createElement("div",{className:"alert alert-danger text-center"},this.state.fireErrors):null;return r.a.createElement("section",{className:"register-page section"},r.a.createElement("div",{className:"row align-items-center justify-content-center h-100"},r.a.createElement("div",{className:"col-6 border border-secondary rounded bg-light p-3"},r.a.createElement("h1",{className:"text-dark text-center"},"Register"),e,r.a.createElement(C,{handleChange:this.handleChange,register:this.register,state:this.state}))))}}]),a}(n.Component),O=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).redirectToHomePage=function(e){setTimeout((function(){n.props.history.push("/home")}),e)},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.redirectToHomePage(1e4)}},{key:"render",value:function(){var e=this;return r.a.createElement("section",{className:"success-page section"},r.a.createElement("div",{className:"row align-items-center justify-content-center h-100"},r.a.createElement("div",{className:"col-6 border border-light rounded bg-success p-3"},r.a.createElement("h1",{className:"text-white text-center"},"Register complited!"),r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-4"},r.a.createElement("button",{className:"btn btn-sm btn-dark mb-2 btn-block",onClick:function(){return e.redirectToHomePage(0)}},"Continue"))))))}}]),a}(n.Component),I=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){return Object(l.a)(this,a),t.call(this,e)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement(k,{outPage:"/edit",userId:this.props.userId})}}]),a}(n.Component),S=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={title:n.props.location.state.item?n.props.location.state.item.title:"",description:n.props.location.state.item?n.props.location.state.item.description:"",deadline:n.props.location.state.item?n.props.location.state.item.deadline:"",done:!!n.props.location.state.item&&n.props.location.state.item.done},n.handleChange=function(e){n.setState(Object(h.a)({},e.target.name,e.target.value))},n.pageMod=n.props.location.state.mode,n.pageTitle="create"===n.pageMod?"New todo":"Edit todo",n.pageSuccessBtn="create"===n.pageMod?"Add":"Save",n.itemId=n.props.location.state.id,n}return Object(o.a)(a,[{key:"handleSend",value:function(){if(null!==this.state.deadline){var e=u.a.auth().currentUser.uid;"Add"===this.pageSuccessBtn?(u.a.database().ref("users/"+e+"/todos/").push().set({title:this.state.title,description:this.state.description,deadline:this.state.deadline,done:this.state.done}),this.props.history.goBack()):"Save"===this.pageSuccessBtn&&(u.a.database().ref("users/"+e+"/todos/"+this.itemId).update({title:this.state.title,description:this.state.description,deadline:this.state.deadline,done:this.state.done}),this.props.history.goBack())}}},{key:"render",value:function(){var e=this;return r.a.createElement("section",{className:"create-or-edit-page section"},r.a.createElement("div",{className:"row align-items-center justify-content-center h-100"},r.a.createElement("div",{className:"col-5 border border-secondary rounded bg-dark p-3"},r.a.createElement("h1",{className:"text-white text-center"},this.pageTitle),r.a.createElement("form",null,r.a.createElement("div",{className:"row text-white justify-content-center"},r.a.createElement("div",{className:"col-10"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"title"},"Title:"),r.a.createElement("input",{id:"title",type:"text",className:"form-control",placeholder:"Title",onChange:this.handleChange,name:"title",value:this.state.title})))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"description"},"Description"),r.a.createElement("textarea",{className:"form-control",id:"description",rows:"3",onChange:this.handleChange,name:"description",value:this.state.description})))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"d-inline-block",htmlFor:"inputDate"},"Deadline:"),r.a.createElement("input",{id:"inputDate",type:"datetime-local",className:"form-control",placeholder:"Time or date",onChange:this.handleChange,name:"deadline",value:this.state.deadline,required:!0})))),r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-3"},r.a.createElement("button",{type:"button",className:"btn btn-success btn-block",onClick:this.handleSend.bind(this)},this.pageSuccessBtn)),r.a.createElement("div",{className:"col-3"},r.a.createElement("button",{type:"button",className:"btn btn-danger btn-block",onClick:function(){return e.props.history.goBack()}},"Back")))))))))}}]),a}(n.Component),P=a(9),D=Object(P.a)(),z=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).state={user:null},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.authListener()}},{key:"authListener",value:function(){var e=this;p.auth().onAuthStateChanged((function(t){t?e.setState({user:t,userId:t.uid}):e.setState({user:null})}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(v.a,{history:D},r.a.createElement(E.d,null,r.a.createElement(E.b,{exact:!0,path:"/"},this.state.user?r.a.createElement(E.a,{to:"/home"}):r.a.createElement(E.a,{to:"/login"})),r.a.createElement(E.b,{path:"/login"},this.state.user?r.a.createElement(E.a,{to:"/home"}):r.a.createElement(g,null)),r.a.createElement(E.b,{exact:!0,path:"/register"},this.state.user?r.a.createElement(E.a,{to:"/register/success"}):r.a.createElement(x,null)),r.a.createElement(E.b,{path:"/home"},this.state.user?r.a.createElement(j,{userId:this.state.userId}):r.a.createElement(E.a,{to:"/login"})),r.a.createElement(E.b,{path:"/edit"},r.a.createElement(I,{userId:this.state.userId})),r.a.createElement(E.b,{path:"/edit-or-create",component:S}),r.a.createElement(E.b,{path:"/register/success",component:O}))))}}]),a}(n.Component);c.a.render(r.a.createElement(z,null),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.187b5e86.chunk.js.map